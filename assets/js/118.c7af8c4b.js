(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{545:function(s,t,a){"use strict";a.r(t);var e=a(0),l=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"_1-准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-准备工作"}},[s._v("#")]),s._v(" 1. 准备工作")]),s._v(" "),t("p",[s._v("以Centos7为例，准备一台至少内存为4G的机器。")]),s._v(" "),t("h2",{attrs:{id:"_2-安装依赖软件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装依赖软件"}},[s._v("#")]),s._v(" 2. 安装依赖软件")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo yum install -y git vim gcc glibc-static telnet\nsudo yum install -y curl policycoreutils-python openssh-server\nsudo systemctl enable sshd\nsudo systemctl start sshd\n\nsudo yum install postfix\nsudo systemctl enable postfix\nsudo systemctl start postfix\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("可能出现的错误:")]),s._v(" "),t("blockquote",[t("p",[s._v('Job for postfix.service failed because the control process exited with error code. See "systemctl status postfix.service" and "journalctl -xe" for details.')])]),s._v(" "),t("p",[s._v("解决方法：修改 /etc/postfix/main.cf的设置")]),s._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("inet_protocols "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ipv4\ninet_interfaces "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" all\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"_3-设置gitlab安装源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-设置gitlab安装源"}},[s._v("#")]),s._v(" 3. 设置gitlab安装源")]),s._v(" "),t("p",[s._v("如果在国内的话，可以尝试使用清华大学的源。")]),s._v(" "),t("p",[s._v("新建 /etc/yum.repos.d/gitlab-ce.repo，内容为")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[gitlab-ce]\nname=Gitlab CE Repository\nbaseurl=https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el$releasever/\ngpgcheck=0\nenabled=1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("如果在国外的话，可以使用")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.rpm.sh | sudo bash\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_4-安装gitlab"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-安装gitlab"}},[s._v("#")]),s._v(" 4. 安装GitLab")]),s._v(" "),t("p",[s._v("关于域名，如果要是设置域名，则如下，这个域名可以是真实购买的域名，如果您要把gitlab安装到公网比如阿里云上的话。")]),s._v(" "),t("p",[s._v("如果只是想本地测试，则可以像下面一样，设置一个example的域名，然后记得在本地你的笔记本设置host，如果是MAC就在 /etc/hosts里添加 一行 "),t("code",[s._v("192.168.211.10 gitlab.example.com")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('sudo EXTERNAL_URL="http://gitlab.example.com" yum install -y gitlab-ce\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果不想设置域名，或者想将来再考虑，可以直接")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" gitlab-ctl stop "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" gitlab-ce-11.5.3\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("安装完成以后，运行下面的命令进行配置")]),s._v(" "),t("p",[t("code",[s._v("/etc/gitlab/gitlab.rb")]),s._v(" 配置文件位置")]),s._v(" "),t("p",[t("code",[s._v("external_url 'http://work.myteam.com'")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" gitlab-ctl reconfigure\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_5-登陆和修改密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-登陆和修改密码"}},[s._v("#")]),s._v(" 5. 登陆和修改密码")]),s._v(" "),t("p",[s._v("打开http://gitlab.example.com/ 修改root用户密码，然后使用root和新密码登陆。")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://about.gitlab.com/installation",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考文档"),t("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=l.exports}}]);