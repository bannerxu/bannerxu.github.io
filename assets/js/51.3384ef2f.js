(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{478:function(a,s,t){"use strict";t.r(s);var e=t(0),l=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h3",{attrs:{id:"第一步-备份"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一步-备份"}},[a._v("#")]),a._v(" 第一步：备份")]),a._v(" "),s("p",[a._v("查看是否存在备份：")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ssh")]),a._v(" root@127.0.0.1\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" /var/opt/gitlab/backups \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("备份：")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("gitlab-rake gitlab:backup:create\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"第二步-安装相同版本的gitlab"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第二步-安装相同版本的gitlab"}},[a._v("#")]),a._v(" 第二步：安装相同版本的gitlab")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://packages.gitlab.com/gitlab/gitlab-ce",target:"_blank",rel:"noopener noreferrer"}},[a._v("下载地址：https://packages.gitlab.com/gitlab/gitlab-ce"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("下载：")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/7/gitlab-ce-13.6.1-ce.0.el7.x86_64.rpm\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("安装：")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ivh")]),a._v(" gitlab-ce-13.6.1-ce.0.el7.x86_64.rpm\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"第三步-复制备份文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第三步-复制备份文件"}},[a._v("#")]),a._v(" 第三步：复制备份文件")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" /var/opt/gitlab/backups/1615840104_2021_03_16_13.6.1_gitlab_backup.tar root@127.0.0.2:/var/opt/gitlab/backups/\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"第四步-gitlab恢复"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第四步-gitlab恢复"}},[a._v("#")]),a._v(" 第四步：gitlab恢复")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("777")]),a._v(" /var/opt/gitlab/backups/1615840104_2021_03_16_13.6.1_gitlab_backup.tar\ngitlab-rake gitlab:backup:restore "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("BACKUP")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("1615840104_2021_03_16_13.6.1\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])])])}),[],!1,null,null,null);s.default=l.exports}}]);